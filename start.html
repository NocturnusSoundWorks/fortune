<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>はじめに</title>

<link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  font-family:'DotGothic16', sans-serif;
  color:white;
  background:#191970;
}

/* 星 */
.stars{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}

.star{
  position:absolute;
  width:2px;
  height:2px;
  background:white;
  animation: blinkStar 2s infinite alternate;
}

@keyframes blinkStar{
  0%{ opacity:0.2; }
  50%{ opacity:1; }
  100%{ opacity:0.2; }
}

/* 白い太枠 */
.box{
  width:80%;
  max-width:800px;
  height:55vh;
  border:6px solid white;
  padding:30px;
  box-sizing:border-box;
  overflow-y:auto;
  background:rgba(0,0,0,0.4);
  line-height:2.2;
  text-align: center;
  font-size:20px;
  white-space: pre-line;
}

/* ボタン共通 */
.menu{
  margin-top:30px;
  text-align:center;
  font-size:22px;
  letter-spacing:3px;
}

.menu-item{
  margin:15px 0;
  cursor:pointer;
  position:relative;
}

.menu-item::before{
  content:"▶";
  position:absolute;
  left:-30px;
  opacity:0;
}

.menu-item.active::before{
  opacity:1;
  animation: blink 1s infinite;
}

@keyframes blink{
  0%{opacity:1;}
  50%{opacity:0;}
  100%{opacity:1;}
}
</style>
</head>

<body>

<div class="stars"></div>

<div class="box" id="text"></div>

<div class="menu" id="buttons">
  <div class="menu-item" id="skipBtn">SKIP</div>
  <div class="menu-item" id="backBtn" style="display:none;" data-link="main.html">戻る</div>
  <div class="menu-item" id="regBtn" style="display:none;" data-link="touroku.html">とうろく</div>
</div>

<script>

/* 星空生成 */
const starContainer = document.querySelector(".stars");
for(let i=0;i<120;i++){
  const star=document.createElement("div");
  star.classList.add("star");
  star.style.top=Math.random()*100+"%";
  star.style.left=Math.random()*100+"%";
  star.style.animationDelay=Math.random()*2+"s";
  starContainer.appendChild(star);
}

/* タイピング文章 */
const message = `占いの結果は、未来を決めるものではありません。
けれど今のあなたに流れている空気や、
選択のヒントを映し出してくれる鏡のような存在です。
同じ言葉でも受け取り方は人それぞれ。
背中を押される日もあれば、
立ち止まって考えるきっかけになることもあります。
大切なのは、そこから何を感じ、どうしたいと思うかです。
ここでは良い・悪いを決めつけたり、不安をあおったりはしません。
ただ、今日という時間を心地よく過ごすための視点を
そっと置いていきます。
迷ったときや踏み出したいとき、自分の気持ちを確かめたいとき。
運勢をひとつの材料にして、自分自身と向き合ってみてください。
選ぶのはいつでもあなた。
その決断が少しでも軽くなるように、
この場所が静かな後押しになれたならうれしく思います。`;

const textEl = document.getElementById("text");
const skipBtn = document.getElementById("skipBtn");
const backBtn = document.getElementById("backBtn");
const regBtn = document.getElementById("regBtn");

let index=0;
let typing=true;

function typeWriter(){
  if(index < message.length && typing){
    textEl.textContent += message.charAt(index);
    index++;
    setTimeout(typeWriter,80);
  }else{
    finishTyping();
  }
}

function finishTyping(){
  typing=false;
  textEl.textContent = message;
  skipBtn.style.display="none";
  backBtn.style.display="block";
  regBtn.style.display="block";
}

skipBtn.addEventListener("click", finishTyping);

typeWriter();

/* ボタン移動 */
document.querySelectorAll("[data-link]").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    location.href = btn.dataset.link;
  });
});

</script>

</body>
</html>
